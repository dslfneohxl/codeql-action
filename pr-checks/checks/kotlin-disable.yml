name: "Kotlin extraction is disabled with `CODEQL_EXTRACTOR_JAVA_AGENT_DISABLE_KOTLIN`"
description: "Tests Kotlin extraction failure when `CODEQL_EXTRACTOR_JAVA_AGENT_DISABLE_KOTLIN` is set"
versions: ["latest", "cached", "nightly-latest"]
env:
  CODEQL_EXTRACTOR_JAVA_AGENT_DISABLE_KOTLIN: "true"
steps:
  - uses: ./../action/init
    with:
      languages: kotlin
      tools: ${{ steps.prepare-test.outputs.tools-url }}
    env:
      TEST_MODE: true
  - name: Build code
    shell: bash
    run: ./build.sh
  - uses: ./../action/analyze
    id: analysis
    with:
      expect-error: true
    env:
      TEST_MODE: true